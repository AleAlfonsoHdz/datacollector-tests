# Stage configuration tests

The test files in this folder were generated automatically with a script that scrapes Data Collector's stage
definitions and creates one file per stage with one test function per user-facing stage configuration. A few things
to keep in mind:

1. The goal of each stage configuration test is to verify the basic functionality of the configuration. For example,
a test like `test_batch_size`, which exercises the "Batch Size" configuration of a stage, could be written to
verify that changing the batch size to 2 or 10 results in the batches generated by the stage to be of the correct size.
For tests more complex than such sanity tests, create test functions under the "stage" folder, instead.
2. Some functions are parametrized with a `stage_attributes` variable. **Please do not modify this variable**
as its form is relied upon when re-running the generator script and when generating stage configuration test
coverage metrics.
3. The `stage_attributes` variable returns a dictionary of configurations containing either permutations of the
configuration under test or dependent configurations that must for the test to work (e.g. Avro configurations
generally require the "Data Format" configuration to be set to "AVRO"). Use `Stage.set_attributes(**stage_attributes)`
to set all these configurations on a stage in one line of code.

Feel free to reach out the EP team (`#eng-productivity` on Slack) with any questions.
